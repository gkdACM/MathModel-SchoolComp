# 数据库表作用说明

> 本文档仅解释各数据表的用途与职责，便于快速理解系统数据域。字段细节、索引与约束请参见 `docs/数据库设计.md` 与后端模型定义 `backend/app/models.py`。

## 账号与人员

- `admins`：平台管理员账户与认证信息，负责系统配置与后台管理操作。
- `students`：学生用户基础档案（学号、学院、班级、邮箱）与登录状态，用于参赛报名与作品提交的主体身份。
- `teachers`：教师评审账户与基础信息，用于参与评审过程与评分。
- `login_logs`：登录行为审计，记录不同角色的登录是否成功、来源 IP 与时间，便于安全追踪与统计。

## 赛季与报名

- `seasons`：竞赛赛季配置，包含报名窗口、开赛时间、提交截止与评审窗口等时间参数，以及是否允许对外报名的开关与赛季状态。
- `enrollments`：学生在某赛季的报名记录与状态（pending/approved/rejected），用于统计报名与控制参赛资格。

## 队伍与成员

- `teams`：参赛队伍的主记录，关联赛季与队长，包含队伍编号、名称、审批/锁定状态等。
- `team_members`：队伍与学生的成员关系表，记录成员角色（captain/member）与加入时间；限制一人同赛季一队。
- `team_join_tokens`：队伍加入令牌，用于队长邀请同学加入队伍；含有效期与启用状态，支持定期刷新。
- `team_join_requests`：加入队伍的请求/历史审计，记录学生尝试加入的状态与时间，形成可追溯的历史。

## 赛题与作品提交

- `problem_files`：赛题文件的存储元数据（文件名、大小、哈希、路径），支持在开赛后公开可见的控制。
- `submissions`：队伍作品提交的主记录，按版本递增，兼容旧字段（主文件名与哈希），记录每次提交的时间与备注。
- `submission_files`：一次提交关联的具体文件明细（论文 `thesis` 与支撑材料 `materials`），包含文件名、大小、哈希与物理存储路径，支撑双文件上传与校验。

## 评审与评分

- `review_dimensions`：评审维度定义（键值、名称、权重、满分、排序），用于标准化评分指标体系。
- `review_configs`：赛季级评审配置（需参与教师数量、是否匿名评审等），控制评审流程参数；每赛季唯一。
- `reviews`：教师对某次提交的评审记录与评语，支持后续维度评分与更新审阅状态。
- `review_scores`：某次评审在各维度上的具体评分，维度键唯一约束保证同一评审下不重复打分。

## 展示与审计

- `excellent_works`：历年优秀作品的展示条目，可选关联队伍与提交，也可独立存档；含摘要与是否允许下载。
- `excellent_work_files`：优秀作品关联的文件明细（文件名、大小、哈希与路径），用于下载与展示资源管理。
- `audit_logs`：系统操作审计日志，记录行为主体、动作、对象与详细信息，便于合规与问题追踪。