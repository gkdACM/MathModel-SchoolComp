# 数学建模校赛网站 — 需求文档（初版）

【同步更新：管理员登录路由与界面】
- 路由：`/admin-manager`，根路径 `/` 默认重定向至该路由。
- 界面风格：科技感 + 学术风格（玻璃拟态、网格/轨道背景、冷色系）。
- 表单：管理员账号（邮箱或用户名）与密码两个必填项。
- 交互：当前阶段为本地校验占位，后续接入后端管理员登录 API。

【显示与适配约束（新增）】
- 仅适配 PC 端显示；不支持移动端与小屏设备。
- 推荐分辨率：1920×1080。


【响应式适配规范（新增）】
- 策略：PC 优先，移动与小屏提供基本可用性，不追求完整移动端视觉。
- 布局行为：双栏（信息介绍 + 登录卡片）在窄屏自动切换为单栏并居中显示。
- 尺寸缩放：标题、说明、按钮与输入框高度采用 `clamp()` 随屏宽缩放；容器间距使用 `clamp()` 控制。
- 背景缩放：光晕与网格背景尺寸使用 `clamp()` 随屏宽缩放，避免遮挡或失衡。
- 断点说明：
  - `<=1080px`：右栏登录卡片宽度缩至 ~380px；整体间距按比例缩小。
  - `<=920px`：切换为单栏布局；登录卡片居中并设置最大宽度 ~560px。
  - `<=600px`：卡片圆角与阴影适度减弱；特性标签间距缩小，网格密度降低。


## 1. 背景与目标
- 面向校内数学建模竞赛的报名、组队、命题发布、作品提交与评审全流程管理。
- 支撑三类角色：学生、教师、管理员；覆盖赛前、赛中、赛后三个阶段。
- 保障数据安全与合规，确保评审流程公平、可追溯、可统计。

## 2. 角色与权限
- 学生（参赛者）：
  - 注册：以学号注册；需填写学院、班级、学号、姓名、邮箱（用于验证码与找回，必填）。
  - 登录：使用学号或学校邮箱（可选）+密码；支持忘记密码重置。
  - 报名：报名当前赛季（活动），报名后可创建/加入队伍。
  - 组队：队伍人数上限 3 人；队长创建队伍并生成加入 token；队伍编号系统生成且不展示给用户（用于内部关联）。
  - 赛题：开赛后可看到并下载赛题文件（pdf/zip）。
  - 作品提交：在截止前可上传作品，可重复覆盖上传；保留提交记录与最终版本；支持大文件上传与断点续传（可选）。
  - 历年优秀作品：浏览历年优秀作品展示页（含作品摘要、分数、下载权限由管理员配置）。

- 教师（评审）：
  - 登录：使用教师工号或账号+密码；初次密码由管理员批量生成（纯数字）。
  - 评审：在评审阶段查看待评作品列表，支持检索与筛选；对每份作品打分与评语；每份作品需要所有教师都评分（可配置为至少 N 位教师）。
  - 评分一致性：支持评分进度查看、评分修改（在评审期内）、评分日志留痕。

- 管理员（赛事运营）：
  - 账号管理：
    - 审核队伍（删除队伍、移除成员、变更队长、锁定队伍）。
    - 批量添加教师账号，自动生成默认纯数字密码，支持导入/导出 CSV。
    - 学生数据核验与批量导入（可选）。
  - 赛事管理：
    - 创建赛季（赛事活动），配置报名期、开赛时间、截止时间、评审期。
    - 上传赛题（pdf/zip）；管理文件版本与可见性。
    - 作品管理：查看、导出作品与提交记录；设置是否允许下载历年优秀作品源文件。
  - 评审配置：设置评分维度、权重、是否匿名评审（隐藏队伍与成员信息给教师）。
  - 安全与审计：查看操作日志、评分日志、登录日志；数据导出统计报表。

## 3. 关键业务流程
- 报名与组队：
  1) 学生注册并登录 → 选择当前赛季报名。
  2) 报名后可创建队伍（成为队长，系统生成队伍编号）或加入队伍（使用队长分享的 token）。
  3) 队伍满员上限 3 人；允许队伍在报名期内调整成员；报名期结束后队伍锁定（成员变更需管理员审批）。

- 赛题发布与下载：
  1) 管理员在开赛时间前上传赛题文件并设置在“开赛后可见”。
  2) 到达开赛时间，已报名队伍成员可下载赛题。

- 作品提交：
  1) 队伍在提交截止时间前上传作品（单文件或压缩包）；允许覆盖更新。
  2) 系统保留提交历史（时间戳、提交人、哈希、备注），评审以最终版本为准。
  3) 超时禁止提交；支持管理员特批延长期（个别队伍）。

- 评审与打分：
  1) 进入评审期，教师看到待评作品列表（可筛选：是否已评、学院、队伍等）。
  2) 教师对每份作品按评分维度打分并给出评语；支持保存草稿与提交评分。
  3) 每份作品需所有教师完成评分（或至少 N 位）；系统汇总加权总分，支持异常值检测（如去极值、Z-Score 提醒）。
  4) 管理员可查看评分进度与最终排名，发布优秀作品。

## 4. 数据与约束
- 学生信息：学院、班级、学号（唯一）、姓名、邮箱（用于验证码与找回）。
- 队伍：队伍编号（内部）、队伍名称、队长、成员列表、加入 token（可旋转/失效）。
- 赛季：名称、报名期、开赛时间、提交截止、评审期、状态（未开始/报名中/进行中/评审中/已结束）。
- 文件：赛题文件（pdf/zip）、作品文件（zip/pdf/其他）；文件大小限制与类型白名单；存储路径与版本管理。
- 评分：评分维度（如建模、算法、写作、创新等）、权重、教师评分记录、评语、提交时间。
- 权限约束：
  - 只有报名且在队伍中的学生可见赛题与提交入口。
  - 截止后禁止提交；评审期后禁止改分（除非管理员解锁）。
  - 加入 token 仅在报名期内有效（默认），过期需队长重新生成。

## 5. 安全与合规
- 密码策略：
  - 教师初始密码为纯数字，首次登录强制修改并设置复杂度；支持邮箱验证码作为二次验证（可选）。
  - 学生密码需最小长度与常见复杂度校验。
- 文件安全：病毒扫描（可选）、哈希校验、防止脚本文件上传；下载权限控制；防直链。
- 隐私与合规：学生个人信息最小化采集；评审过程可匿名；操作与评分日志留存。
- 审计与风控：登录失败告警、异常评分波动提醒、IP 频次限制与邮箱验证码（在关键节点，如找回与敏感操作）。

## 6. 非功能性需求
- 可用性：并发支持（校赛规模，预计 1000-5000 学生用户）；稳定性与容错。
- 性能：作品上传支持至少 200MB；列表分页；评分表单响应及时。
- 可维护性：模块化设计，清晰边界；配置化赛季参数。
- 可观测性：基础监控、错误追踪；操作日志。

## 7. 风险与异常场景
- 报名后弃赛：队伍成员退出策略与名额释放；管理员干预。
- 队伍冲突：重复加入、多账号注册；需要学号唯一与邮箱校验。
- 上传失败：断点续传与重试；超时处理；多版本回滚。
- 评审偏差：异常值提醒与多教师评分融合策略；加权规则透明。

## 8. 缺失与补充（对原始需求的合理性分析）
- 明确赛季概念：多届比赛的周期管理（报名、开赛、截止、评审），原描述未提及赛季配置与状态机，已补充。
- 匿名评审：为公平性建议默认匿名展示队伍与成员信息给教师，原描述未涉及，已作为可配置项补充。
- 评分维度与权重：原描述仅“打分”，缺少细化维度与加权，已补充可配置的评分维度与权重。
- 提交版本管理：原描述允许覆盖，但未说明保留历史与最终版本判定，已补充保留历史与最终版规则。
- 安全策略：原描述提及“默认数字密码”，但未要求首次修改与复杂度，已补充强制改密与二次验证可选。
- 文件与大小限制：原描述未说明大小/类型限制与哈希校验，已补充。
- 队伍管理细节：原描述有“删除队伍”，但未提成员调整与队长变更，已补充管理员操作集。
- 历年优秀作品下载权限：原描述仅展示，是否允许下载需策略，已补充可配置。
- 日志与审计：原描述未涉及操作、评分、登录日志，已补充。
- 进度与统计：原描述缺少评分进度、排名发布与导出，已补充。

## 9. 成功标准
- 完成从报名到评审的闭环功能；
- 数据准确、一致、可追溯；
- 评分流程透明、可配置；
- 管理与运营便捷；
- 安全与合规达标。

（本需求文档为初版，后续将根据确认反馈细化原型与数据结构。）